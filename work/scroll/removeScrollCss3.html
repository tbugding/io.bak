<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>scroll</title>
<style>
*{margin: 0; padding: 0; list-style: none;}
body{overflow: hidden;}
#nav{width: 100%; height: 30px; _box-shadow: 0 0 5px #000; border-bottom: 1px solid #000; background: rgba(0,0,0,.8); position: fixed; z-index: 1}
#view{ width: 100%; position: absolute; top:0px; transition:top .6s;}
#box1{width: 100%; background: url(header.jpg);}
#box2{width: 100%; background: #82F960;}
#box3{width: 100%; background: #6B92F5;}
#box4{width: 100%; background: #F7595E;}
</style>
<script>

//绑定事件
function addEvent(obj,sEvent,fn){
	if(obj.addEventListener){
		obj.addEventListener(sEvent,fn,false)
	}else{
		obj.attachEvent('on'+sEvent,fn)
	}
}
//解绑事件
function removeEvent(obj,sEv,fn){
	obj.removeEventListener?obj.removeEventListener(sEv,fn,false):obj.detachEvent('on'+sEv,fn);
}


function addWheel(obj,fn){
	obj.getDown=function(ev){
		var oEvent=ev||event;
		var beDown=false;
		beDown=oEvent.wheelDelta?oEvent.wheelDelta<0:oEvent.detail>0;
		fn && fn(beDown);
		oEvent.preventDefault && oEvent.preventDefault();
		return false;
	}
	if(window.navigator.userAgent.indexOf('Firefox')!=-1){
		obj.addEventListener('DOMMouseScroll',obj.getDown,false);
	}else{
		addEvent(obj,'mousewheel',obj.getDown);
	}
}


window.onload=function(){
	clientH=document.documentElement.clientHeight;
	var oBody=document.getElementById('body');
	var oView=document.getElementById('view');
	var oBox=oView.children;
	setView();
	scrollable=true;
	iNow=0;
	addWheel(document,function(beDown){
		if(beDown && scrollable){
			scrollable=false;
			iNow++;
			if(iNow<oBox.length){
				oView.style.top = -iNow*clientH + 'px';
				setTimeout(function(){
					scrollable=true;
				},600)
			}else{
				iNow=oBox.length-1;
				scrollable=true;
			}
		}
		if(!beDown && scrollable){
			scrollable=false;
			iNow--;
			if(iNow==-1){
				iNow=0;
				scrollable=true;
			}else{
				oView.style.top = -iNow*clientH + 'px';
				setTimeout(function(){
					scrollable=true;
				},600)
			}
		}
	})
	window.onresize=function(){
		clientH=document.documentElement.clientHeight;
		setView();
		oView.style.top=-iNow*clientH+'px';
	};
	function setView(){
		for(var i=0;i<oBox.length;i++){
			oBody.style.height=clientH+'px';
			oBox[i].style.height=clientH+'px';
		}
	}
};

</script>
</head>
<body id="body">
<div id="nav"></div>
<div id="view">
	<div id="box1"></div>
	<div id="box2"></div>
	<div id="box3"></div>
	<div id="box4"></div>
</div>
</body>
</html>