<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8"/>
<title>Mapbar 地图 JavaScript API 示例</title>
<style>
body,html{ width: 100%; height: 100%;}
body{margin: 0;}
</style>
<script type="text/javascript" src="http://union.mapbar.com/apis/maps/free?f=mapi&v=31.3&k=aCW9cItqL6d6dy4iaSWtdRDpaR1hMeJ9MeV8EeFhMYV5MeJrNIGnMeMh@YeD99eW6RJVihCnMWctM9ht6IEhhiIeehiIFhee81eLMhhMR9IhiIehJMhW9hiJE99eFFl="></script>
<script type="text/javascript">
var maplet = null;  
function initMap(){  
    maplet = new Maplet("mapbar");  
    maplet.centerAndZoom(new MPoint(116.38672,39.90805), 8);  
    maplet.showOverview(false);  
  
    var application = new MyApplication();  
}  
  
function MyApplication() {  
    this.counter = 0;  
    MEvent.bind(maplet, "click", this, this.onMapClick);

}  
  
MyApplication.prototype.onMapClick = function() {
	console.log(this)
    this.counter++;  
    alert("这是您第 " + this.counter + " 次点击地图");  
} 
</script>
</head>

<body onload="initMap()">
<div id="mapbar" style="width:900px;height:500px"></div>
<div id="message"></div>
</body>
</html>
